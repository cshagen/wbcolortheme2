(self["webpackChunkopenwb_ui_settings"]=self["webpackChunkopenwb_ui_settings"]||[]).push([[8054],{5646:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return l}});var t=o(6252),i=o(3577);const a={key:1},u={key:0},d={key:1};function s(e,n,o,s,r,c){const v=(0,t.up)("openwb-base-alert"),l=(0,t.up)("openwb-base-textarea");return r.componentTemplateFound?((0,t.wg)(),(0,t.j4)((0,t.LL)(c.myComponent),{key:0,configuration:o.configuration,deviceId:o.deviceId,componentId:o.componentId,"onUpdate:configuration":n[0]||(n[0]=e=>c.updateConfiguration(e))},null,40,["configuration","deviceId","componentId"])):((0,t.wg)(),(0,t.iD)("div",a,[(0,t.Wm)(v,{subtype:"warning"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Es wurde keine Konfigurationsseite für den "),o.componentType?((0,t.wg)(),(0,t.iD)("span",u,' Komponenten-Typ "'+(0,i.zw)(o.componentType)+'" ',1)):((0,t.wg)(),(0,t.iD)("span",d,'Gerätetyp "'+(0,i.zw)(o.deviceType)+'"',1)),(0,t.Uk)(" gefunden. Die Einstellungen können als JSON direkt bearbeitet werden. ")])),_:1}),(0,t.Wm)(l,{title:"Konfiguration",subtype:"json","model-value":o.configuration,"onUpdate:modelValue":n[1]||(n[1]=e=>c.updateConfiguration({value:e,object:"configuration"}))},{help:(0,t.w5)((()=>[(0,t.Uk)(" Bitte prüfen Sie, ob die Eingaben richtig interpretiert werden. ")])),_:1},8,["model-value"]),(0,t.Wm)(v,{subtype:"info"},{default:(0,t.w5)((()=>[(0,t._)("pre",null,(0,i.zw)(JSON.stringify(o.configuration,void 0,2)),1)])),_:1})]))}var r={name:"OpenwbConfigProxy",emits:["update:configuration"],props:{deviceId:{required:!0},deviceType:{type:String,required:!0},componentId:{default:void 0},componentType:{type:String,default:void 0},configuration:{type:Object,required:!0}},data(){return{componentTemplateFound:!0}},computed:{myComponent(){return console.debug(`loading component: ${this.deviceType} / ${this.componentType}`),(0,t.RC)((()=>o(8520)(`./${this.deviceType}${this.componentType?`/${this.componentType}`:"/device"}.vue`).then((e=>(this.componentTemplateFound=!0,e))).catch((e=>{console.warn("component template not found",e),this.componentTemplateFound=!1}))))}},methods:{updateConfiguration(e){this.$emit("update:configuration",e)}}},c=o(3744);const v=(0,c.Z)(r,[["render",s]]);var l=v},9968:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return k}});var t=o(6252),i=o(3577);const a=e=>((0,t.dD)("data-v-630c3d58"),e=e(),(0,t.Cn)(),e),u={class:"hardwareInstallation"},d={name:"hardwareInstallationForm"},s={class:"col-1"},r=a((()=>(0,t._)("hr",null,null,-1))),c=a((()=>(0,t._)("hr",null,null,-1))),v={class:"col-1"},l=a((()=>(0,t._)("hr",null,null,-1)));function m(e,n,o,a,m,p){const b=(0,t.up)("openwb-base-modal-dialog"),g=(0,t.up)("router-link"),w=(0,t.up)("openwb-base-alert"),f=(0,t.up)("font-awesome-icon"),h=(0,t.up)("openwb-base-click-button"),y=(0,t.up)("openwb-base-select-input"),_=(0,t.up)("openwb-base-avatar"),k=(0,t.up)("openwb-base-text-input"),C=(0,t.up)("openwb-config-proxy"),W=(0,t.up)("openwb-base-card"),T=(0,t.up)("openwb-base-submit-buttons");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(b,{show:m.showDeviceRemoveModal,title:"Gerät löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:p.removeDevice},{default:(0,t.w5)((()=>[(0,t.Uk)(' Wollen Sie das Gerät "'+(0,i.zw)(m.modalDeviceName)+'" inklusive aller Komponenten wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! ',1)])),_:1},8,["show","onModalResult"]),(0,t.Wm)(b,{show:m.showComponentRemoveModal,title:"Komponente löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:p.removeComponent},{default:(0,t.w5)((()=>[(0,t.Uk)(' Wollen Sie die Komponente "'+(0,i.zw)(m.modalComponentName)+'" wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! ',1)])),_:1},8,["show","onModalResult"]),(0,t._)("div",u,[(0,t._)("form",d,[(0,t.Wm)(w,{subtype:"info"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Wenn neue Komponenten - insbesondere Zähler - konfiguriert wurden, ist auch das "),(0,t.Wm)(g,{to:"/LoadManagementConfiguration"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Lastmanagement ")])),_:1}),(0,t.Uk)(" zu prüfen! ")])),_:1}),(0,t.Wm)(W,{title:"Systeme und Komponenten"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{class:"mb-2",title:"Verfügbare Systeme",notSelected:"Bitte auswählen",options:p.getDeviceList(),"model-value":m.deviceToAdd,"onUpdate:modelValue":n[0]||(n[0]=e=>m.deviceToAdd=e)},{append:(0,t.w5)((()=>[(0,t._)("span",s,[(0,t.Wm)(h,{class:(0,i.C_)(void 0===m.deviceToAdd?"btn-outline-success":"btn-success clickable"),disabled:void 0===m.deviceToAdd,onClick:p.addDevice},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{"fixed-width":"",icon:["fas","plus"]})])),_:1},8,["class","disabled","onClick"])])])),help:(0,t.w5)((()=>[(0,t.Uk)(" Bitte ein System auswählen, das hinzugefügt werden soll. ")])),_:1},8,["options","model-value"]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(p.installedDevices,((n,o)=>((0,t.wg)(),(0,t.j4)(W,{key:n.id,collapsible:!0,collapsed:!0,subtype:"primary"},{header:(0,t.w5)((()=>[(0,t.Wm)(_,{class:"bg-success"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{"fixed-width":"",icon:["fas","network-wired"]})])),_:1}),(0,t.Uk)(" "+(0,i.zw)(n.name),1)])),actions:(0,t.w5)((()=>[(0,t.Wm)(_,{class:"bg-danger clickable",onClick:e=>p.removeDeviceModal(n.id,n.name,e)},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{"fixed-width":"",icon:["fas","trash"]})])),_:2},1032,["onClick"])])),default:(0,t.w5)((()=>[(0,t.Wm)(k,{title:"Bezeichnung",subtype:"text","model-value":n.name,"onUpdate:modelValue":n=>e.updateState(o,n,"name")},null,8,["model-value","onUpdate:modelValue"]),r,(0,t.Wm)(C,{deviceId:n.id,deviceType:n.type,configuration:n.configuration,"onUpdate:configuration":e=>p.updateConfiguration(o,e)},null,8,["deviceId","deviceType","configuration","onUpdate:configuration"]),c,p.getComponentList(n.type).length?((0,t.wg)(),(0,t.j4)(y,{key:0,class:"mb-2",title:"Verfügbare Komponenten",notSelected:"Bitte auswählen",options:p.getComponentList(n.type),"model-value":m.componentToAdd[n.id],"onUpdate:modelValue":e=>m.componentToAdd[n.id]=e},{append:(0,t.w5)((()=>[(0,t._)("span",v,[(0,t.Wm)(h,{class:(0,i.C_)(void 0===m.componentToAdd[n.id]?"btn-outline-success":"btn-success clickable"),disabled:void 0===m.componentToAdd[n.id],onClick:e=>p.addComponent(n.id,n.type,m.componentToAdd[n.id])},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{"fixed-width":"",icon:["fas","plus"]})])),_:2},1032,["class","disabled","onClick"])])])),help:(0,t.w5)((()=>[(0,t.Uk)(" Bitte eine Komponente auswählen, die hinzugefügt werden soll. ")])),_:2},1032,["options","model-value","onUpdate:modelValue"])):((0,t.wg)(),(0,t.j4)(w,{key:1,subtype:"info"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Dieses System bietet keine Komponenten zur Installation an. ")])),_:1})),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(p.getMyInstalledComponents(n.id),((o,a)=>((0,t.wg)(),(0,t.j4)(W,{key:o.id,collapsible:!0,collapsed:!0,subtype:"dark"},{header:(0,t.w5)((()=>[(0,t.Wm)(_,{class:"bg-success"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{"fixed-width":"",icon:["fas","microchip"]})])),_:1}),(0,t.Uk)(" "+(0,i.zw)(o.name),1)])),actions:(0,t.w5)((()=>[(0,t.Wm)(_,{class:"bg-danger clickable",onClick:e=>p.removeComponentModal(n.id,o.id,o.type,o.name,e)},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{"fixed-width":"",icon:["fas","trash"]})])),_:2},1032,["onClick"])])),default:(0,t.w5)((()=>[(0,t.Wm)(k,{title:"Bezeichnung",subtype:"text","model-value":o.name,"onUpdate:modelValue":n=>e.updateState(a,n,"name")},null,8,["model-value","onUpdate:modelValue"]),l,(0,t.Wm)(C,{deviceId:n.id,deviceType:n.type,componentId:o.id,componentType:o.type,configuration:o.configuration,"onUpdate:configuration":e=>p.updateConfiguration(a,e)},null,8,["deviceId","deviceType","componentId","componentType","configuration","onUpdate:configuration"])])),_:2},1024)))),128))])),_:2},1024)))),128))])),_:1}),(0,t.Wm)(T,{formName:"hardwareInstallationForm",onSave:n[1]||(n[1]=n=>e.$emit("save")),onReset:n[2]||(n[2]=n=>e.$emit("reset")),onDefaults:n[3]||(n[3]=n=>e.$emit("defaults"))})])])],64)}var p=o(8947),b=o(1436),g=o(7810),w=o(7029),f=o(5646);p.vI.add(b.r8p,b.kXW,b.zvy,b.$aW);var h={name:"OpenwbHardwareInstallation",mixins:[w.Z],emits:["sendCommand"],components:{FontAwesomeIcon:g.GN,OpenwbConfigProxy:f["default"]},data(){return{mqttTopicsToSubscribe:["openWB/counter/get/hierarchy","openWB/system/device/+/config","openWB/system/device/+/component/+/config","openWB/system/configurable/devices_components"],deviceToAdd:void 0,showDeviceRemoveModal:!1,modalDevice:void 0,modalDeviceName:"",componentToAdd:[],showComponentRemoveModal:!1,modalComponent:void 0,modalComponentName:""}},computed:{installedDevices:{get(){return this.getWildcardTopics("openWB/system/device/+/config")}},installedComponents:{get(){return this.getWildcardTopics("openWB/system/device/+/component/+/config")}}},methods:{getMyInstalledComponents(e){return this.getWildcardTopics("openWB/system/device/"+e+"/component/+/config")},addDevice(){this.$emit("sendCommand",{command:"addDevice",data:{type:this.deviceToAdd}})},removeDeviceModal(e,n,o){o.stopPropagation(),this.modalDevice=e,this.modalDeviceName=n,this.showDeviceRemoveModal=!0},removeDevice(e){this.showDeviceRemoveModal=!1,"confirm"==e&&(console.info("request removal of device '"+this.modalDevice+"'"),this.$emit("sendCommand",{command:"removeDevice",data:{id:this.modalDevice}}))},getDeviceList(){return this.$store.state.mqtt["openWB/system/configurable/devices_components"]},addComponent(e,n,o){this.$emit("sendCommand",{command:"addComponent",data:{deviceId:e,deviceType:n,type:o}})},removeComponentModal(e,n,o,t,i){i.stopPropagation(),this.modalComponent={deviceId:e,id:n,type:o},this.modalComponentName=t,this.showComponentRemoveModal=!0},removeComponent(e){this.showComponentRemoveModal=!1,"confirm"==e&&(console.info("request removal of component '"+this.modalComponent.id+"' from device '"+this.modalComponent.deviceId+"' type '"+this.modalComponent.type+"'"),this.$emit("sendCommand",{command:"removeComponent",data:this.modalComponent}))},getComponentList(e){if(void 0===e)return[];console.debug("finding components for '"+e+"'");let n=this.$store.state.mqtt["openWB/system/configurable/devices_components"].find((n=>n.value===e));return n.component},updateConfiguration(e,n){console.debug("updateConfiguration",e,n),this.updateState(e,n.value,n.object)}}},y=o(3744);const _=(0,y.Z)(h,[["render",m],["__scopeId","data-v-630c3d58"]]);var k=_},8520:function(e,n,o){var t={"./OpenwbConfigProxy.vue":[5646],"./alpha_ess/bat.vue":[5210,5210],"./alpha_ess/counter.vue":[4794,4794],"./alpha_ess/device.vue":[7192,7192],"./alpha_ess/inverter.vue":[2909,7208],"./batterx/bat.vue":[3576,3576],"./batterx/counter.vue":[353,353],"./batterx/device.vue":[2243,2243],"./batterx/inverter.vue":[694,694],"./byd/bat.vue":[6053,6053],"./byd/device.vue":[6245,6245],"./carlo_gavazzi/counter.vue":[5484,5484],"./carlo_gavazzi/device.vue":[7287,7287],"./discovergy/counter.vue":[5573,5573],"./discovergy/device.vue":[4728,4728],"./discovergy/inverter.vue":[3144,3144],"./enphase/counter.vue":[4831,4831],"./enphase/device.vue":[9238,9238],"./enphase/inverter.vue":[8774,8774],"./fronius/bat.vue":[2188,2188],"./fronius/counter_s0.vue":[5215,5215],"./fronius/counter_sm.vue":[1386,1386],"./fronius/device.vue":[9151,9151],"./fronius/inverter.vue":[4019,4019],"./good_we/bat.vue":[4599,4599],"./good_we/counter.vue":[3964,3964],"./good_we/device.vue":[4792,4792],"./good_we/inverter.vue":[2293,2293],"./http/bat.vue":[2716,2716],"./http/counter.vue":[297,297],"./http/device.vue":[2496,2496],"./http/inverter.vue":[9059,9059],"./huawei/bat.vue":[96,96],"./huawei/counter.vue":[3175,3175],"./huawei/device.vue":[8034,8034],"./huawei/inverter.vue":[7034,7034],"./janitza/counter.vue":[7554,7554],"./janitza/device.vue":[9609,9609],"./json/bat.vue":[9404,9404],"./json/counter.vue":[2618,2618],"./json/device.vue":[6273,6273],"./json/inverter.vue":[7031,7031],"./kostal_piko/counter.vue":[6692,6692],"./kostal_piko/device.vue":[690,690],"./kostal_piko/inverter.vue":[1353,1353],"./lg/bat.vue":[6065,6065],"./lg/counter.vue":[9961,9961],"./lg/device.vue":[5134,5134],"./lg/inverter.vue":[5305,5305],"./mqtt/bat.vue":[8423,8423],"./mqtt/counter.vue":[847,847],"./mqtt/device.vue":[5625,5625],"./mqtt/inverter.vue":[1879,1879],"./openwb_bat_kit/bat.vue":[3727,3727],"./openwb_bat_kit/device.vue":[1441,6330],"./openwb_evu_kit/bat.vue":[1526,1526],"./openwb_evu_kit/counter.vue":[6754,6754],"./openwb_evu_kit/device.vue":[348,348],"./openwb_evu_kit/inverter.vue":[71,71],"./openwb_flex/bat.vue":[6222,6222],"./openwb_flex/counter.vue":[3415,3415],"./openwb_flex/device.vue":[9689,9689],"./openwb_flex/inverter.vue":[578,578],"./openwb_pv_kit/device.vue":[6769,6769],"./openwb_pv_kit/inverter.vue":[6457,6457],"./powerdog/counter.vue":[203,203],"./powerdog/device.vue":[4805,4805],"./powerdog/inverter.vue":[5926,5926],"./saxpower/bat.vue":[8281,8281],"./saxpower/device.vue":[3868,9171],"./siemens/bat.vue":[8086,8086],"./siemens/counter.vue":[336,336],"./siemens/device.vue":[7402,7402],"./siemens/inverter.vue":[1301,1301],"./siemens_sentron/counter.vue":[2890,2890],"./siemens_sentron/device.vue":[5918,5918],"./sma_shm/counter.vue":[8104,8104],"./sma_shm/device.vue":[2322,2322],"./sma_shm/inverter.vue":[4013,4013],"./sma_sunny_boy/bat.vue":[8236,8236],"./sma_sunny_boy/bat_smart_energy.vue":[7521,7521],"./sma_sunny_boy/counter.vue":[1829,1829],"./sma_sunny_boy/device.vue":[7700,7700],"./sma_sunny_boy/inverter.vue":[2436,2436],"./sma_sunny_island/bat.vue":[4898,4898],"./sma_sunny_island/device.vue":[6771,9607],"./sma_webbox/device.vue":[398,398],"./sma_webbox/inverter.vue":[3100,3100],"./solaredge/bat.vue":[9145,3734],"./solaredge/counter.vue":[6682,6682],"./solaredge/device.vue":[3283,3283],"./solaredge/external_inverter.vue":[4130,4130],"./solaredge/inverter.vue":[9223,9223],"./solarmax/device.vue":[1121,1121],"./solarmax/inverter.vue":[6843,6843],"./solax/bat.vue":[8032,8032],"./solax/counter.vue":[131,131],"./solax/device.vue":[3488,7716],"./solax/inverter.vue":[9970,9970],"./sonnenbatterie/bat.vue":[2672,2909],"./sonnenbatterie/counter.vue":[1863,1863],"./sonnenbatterie/device.vue":[9709,8254],"./sonnenbatterie/inverter.vue":[1974,1974],"./studer/bat.vue":[3666,3666],"./studer/device.vue":[6723,6723],"./studer/inverter.vue":[5950,5950],"./sungrow/bat.vue":[1826,1826],"./sungrow/counter.vue":[5952,5952],"./sungrow/device.vue":[3058,3058],"./sungrow/inverter.vue":[9786,9786],"./sunways/device.vue":[5854,5854],"./sunways/inverter.vue":[387,387],"./tesla/bat.vue":[9035,9035],"./tesla/counter.vue":[9297,9297],"./tesla/device.vue":[7934,7934],"./tesla/inverter.vue":[1620,1620],"./tesla/vehicle_soc.vue":[5310,5310],"./victron/bat.vue":[3212,3212],"./victron/counter.vue":[2146,2146],"./victron/device.vue":[6757,6757],"./victron/inverter.vue":[3049,3049],"./virtual/counter.vue":[3513,3513],"./virtual/device.vue":[2144,2144]};function i(e){if(!o.o(t,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=t[e],i=n[0];return Promise.all(n.slice(1).map(o.e)).then((function(){return o(i)}))}i.keys=function(){return Object.keys(t)},i.id=8520,e.exports=i}}]);
//# sourceMappingURL=HardwareInstallation.5601e72c.js.map