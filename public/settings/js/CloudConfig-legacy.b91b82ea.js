"use strict";(self["webpackChunkopenwb_ui_settings"]=self["webpackChunkopenwb_ui_settings"]||[]).push([[9237],{6806:function(e,n,t){t.r(n),t.d(n,{default:function(){return K}});var o=t(6252),u=t(3577),d=(0,o.Uk)(" Wollen Sie den vorhandenen Cloud Zugang wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! "),r={class:"support"},a=(0,o.Uk)(" Sie müssen der "),l=(0,o.Uk)(" Datenschutzerklärung "),i=(0,o.Uk)(" zustimmen, um die openWB Cloud nutzen zu können. "),s={key:1},c=(0,o.Uk)(" Sie haben der "),m=(0,o.Uk)(" Datenschutzerklärung "),g=(0,o.Uk)(" zugestimmt und können die openWB Cloud nutzen. "),f=(0,o.Uk)(" Der Zugang wurde entfernt. Bitte starten Sie die openWB neu, um die Änderungen anzuwenden! "),p={key:1,name:"cloudConfigCreateForm"},w={key:0},C=(0,o.Uk)(' Diese openWB befindet sich im Modus "Nur Ladepunkt". Bitte richten Sie die openWB Cloud auf der regelnden openWB ein. '),b={key:1},k={class:"row justify-content-center"},B=(0,o.Uk)(" Zugang erstellen "),h=(0,o.Uk)(" Der neue Zugang wird eingerichtet. Dieser Vorgang kann bis zu einer Minute dauern. Bitte warten. "),y={key:2,name:"cloudConfigConnectForm"},W={key:0},v=(0,o.Uk)(' Diese openWB befindet sich im Modus "Nur Ladepunkt". Bitte richten Sie die openWB Cloud auf der regelnden openWB ein. '),_={key:1},D={class:"row justify-content-center"},q=(0,o.Uk)(" Mit Cloud verbinden "),V={key:3,name:"cloudConfigured"},U=(0,o.Uk)(" Der Zugang wurde eingerichtet. Bitte starten Sie die openWB neu, um die Änderungen anzuwenden! "),M=(0,o._)("span",null,[(0,o.Uk)(" Mit diesen Zugangsdaten können Sie sich in der "),(0,o._)("a",{href:"https://web.openwb.de/"},"openWB Cloud "),(0,o.Uk)(" anmelden. ")],-1),Z={class:"row justify-content-center"},z=(0,o.Uk)(" Zugang löschen ");function N(e,n,t,N,S,$){var x=(0,o.up)("openwb-base-modal-dialog"),j=(0,o.up)("router-link"),R=(0,o.up)("openwb-base-alert"),K=(0,o.up)("openwb-base-text-input"),P=(0,o.up)("openwb-base-click-button"),F=(0,o.up)("openwb-base-card"),I=(0,o.up)("openwb-base-heading");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(x,{show:S.showCloudRemoveModal,title:"Cloud Zugang löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:n[0]||(n[0]=function(e){return $.removeCloud(e)})},{default:(0,o.w5)((function(){return[d]})),_:1},8,["show"]),(0,o._)("div",r,[!0!==e.$store.state.mqtt["openWB/system/dataprotection_acknowledged"]?((0,o.wg)(),(0,o.j4)(R,{key:0,subtype:"danger"},{default:(0,o.w5)((function(){return[a,(0,o.Wm)(j,{to:"/System/DataProtection"},{default:(0,o.w5)((function(){return[l]})),_:1}),i]})),_:1})):((0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(R,{subtype:"success"},{default:(0,o.w5)((function(){return[c,(0,o.Wm)(j,{to:"/System/DataProtection"},{default:(0,o.w5)((function(){return[m]})),_:1}),g]})),_:1}),S.enableRemoveCloudButton?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(R,{key:0,subtype:"warning"},{default:(0,o.w5)((function(){return[f]})),_:1})),$.cloudBridgeKey?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("form",p,[(0,o.Wm)(F,{title:"Neuen Zugang erstellen"},(0,o.Nv)({default:(0,o.w5)((function(){return[!0===e.$store.state.mqtt["openWB/general/extern"]?((0,o.wg)(),(0,o.iD)("div",w,[(0,o.Wm)(R,{subtype:"info"},{default:(0,o.w5)((function(){return[C]})),_:1})])):((0,o.wg)(),(0,o.iD)("div",b,[(0,o.Wm)(K,{title:"Benutzername",required:"",subtype:"user",pattern:"[a-zA-Z]+",modelValue:S.newCloudData.username,"onUpdate:modelValue":n[1]||(n[1]=function(e){return S.newCloudData.username=e})},null,8,["modelValue"]),(0,o.Wm)(K,{title:"E-Mail",required:"",subtype:"email",modelValue:S.newCloudData.email,"onUpdate:modelValue":n[2]||(n[2]=function(e){return S.newCloudData.email=e})},null,8,["modelValue"])]))]})),_:2},[!1===e.$store.state.mqtt["openWB/general/extern"]&&!0===e.$store.state.mqtt["openWB/system/dataprotection_acknowledged"]?{name:"footer",fn:(0,o.w5)((function(){return[(0,o._)("div",k,[(0,o.Wm)(P,{class:(0,u.C_)(["col-4",S.enableNewCloudButton?"btn-success":"btn-outline-success"]),disabled:!S.enableNewCloudButton,onClick:$.createCloud},{default:(0,o.w5)((function(){return[B]})),_:1},8,["class","disabled","onClick"])])]}))}:void 0]),1024),S.enableNewCloudButton?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(R,{key:0,subtype:"info",class:"mb-2"},{default:(0,o.w5)((function(){return[h]})),_:1}))])),$.cloudBridgeKey?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("form",y,[(0,o.Wm)(F,{title:"Vorhandenen Zugang einrichten"},(0,o.Nv)({default:(0,o.w5)((function(){return[!0===e.$store.state.mqtt["openWB/general/extern"]?((0,o.wg)(),(0,o.iD)("div",W,[(0,o.Wm)(R,{subtype:"info"},{default:(0,o.w5)((function(){return[v]})),_:1})])):((0,o.wg)(),(0,o.iD)("div",_,[(0,o.Wm)(K,{title:"Benutzername",required:"",subtype:"user",modelValue:S.connectCloudData.username,"onUpdate:modelValue":n[3]||(n[3]=function(e){return S.connectCloudData.username=e})},null,8,["modelValue"]),(0,o.Wm)(K,{title:"Passwort",required:"",subtype:"password",modelValue:S.connectCloudData.password,"onUpdate:modelValue":n[4]||(n[4]=function(e){return S.connectCloudData.password=e})},null,8,["modelValue"])]))]})),_:2},[!1===e.$store.state.mqtt["openWB/general/extern"]&&!0===e.$store.state.mqtt["openWB/system/dataprotection_acknowledged"]?{name:"footer",fn:(0,o.w5)((function(){return[(0,o._)("div",D,[(0,o.Wm)(P,{class:(0,u.C_)(["col-4",S.enableCloudConnectButton?"btn-success":"btn-outline-success"]),disabled:!S.enableCloudConnectButton,onClick:$.connectCloud},{default:(0,o.w5)((function(){return[q]})),_:1},8,["class","disabled","onClick"])])]}))}:void 0]),1024)])),$.cloudBridgeKey?((0,o.wg)(),(0,o.iD)("form",V,[S.enableCloudConnectButton&&S.enableNewCloudButton?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(R,{key:0,subtype:"warning"},{default:(0,o.w5)((function(){return[U]})),_:1})),(0,o.Wm)(F,{title:"Vorhandener Cloud Zugang"},{footer:(0,o.w5)((function(){return[(0,o._)("div",Z,[(0,o.Wm)(P,{class:(0,u.C_)(["col-4",S.enableRemoveCloudButton?"btn-danger":"btn-outline-danger"]),disabled:!S.enableRemoveCloudButton,onClick:n[7]||(n[7]=function(e){return $.removeCloudModal(e)})},{default:(0,o.w5)((function(){return[z]})),_:1},8,["class","disabled"])])]})),default:(0,o.w5)((function(){return[(0,o.Wm)(I,null,{default:(0,o.w5)((function(){return[M]})),_:1}),(0,o.Wm)(K,{title:"Benutzername",required:"",subtype:"user",modelValue:$.getCloudCredentials().username,"onUpdate:modelValue":n[5]||(n[5]=function(e){return $.getCloudCredentials().username=e}),disabled:""},null,8,["modelValue"]),(0,o.Wm)(K,{title:"Passwort",required:"",subtype:"password",modelValue:$.getCloudCredentials().password,"onUpdate:modelValue":n[6]||(n[6]=function(e){return $.getCloudCredentials().password=e}),disabled:""},null,8,["modelValue"])]})),_:1})])):(0,o.kq)("",!0)]))])],64)}var S=t(8818),$=(t(9720),t(4916),t(4723),t(4912)),x={name:"OpenwbCloudConfig",mixins:[$.Z],emits:["sendCommand"],data:function(){return{mqttTopicsToSubscribe:["openWB/general/extern","openWB/system/dataprotection_acknowledged","openWB/system/mqtt/bridge/+"],enableNewCloudButton:!0,newCloudData:{email:"",username:""},enableCloudConnectButton:!0,connectCloudData:{username:"",password:""},enableRemoveCloudButton:!0,showCloudRemoveModal:!1}},computed:{cloudBridge:{get:function(){for(var e=this.getWildcardTopics("openWB/system/mqtt/bridge/+"),n=0,t=Object.entries(e);n<t.length;n++){var o=(0,S.Z)(t[n],2),u=o[0],d=o[1];d.remote.is_openwb_cloud||delete e[u]}return e}},cloudBridgeKey:{get:function(){for(var e=0,n=Object.entries(this.cloudBridge);e<n.length;e++){var t=(0,S.Z)(n[e],2),o=t[0],u=t[1];if(u.remote.is_openwb_cloud)return o}}}},methods:{getCloudCredentials:function(){return{username:this.cloudBridge[this.cloudBridgeKey].remote.username,password:this.cloudBridge[this.cloudBridgeKey].remote.password}},getMqttBridgeIndex:function(e){return parseInt(e.match(/(?:\/)(\d+)$/)[1])},createCloud:function(){document.forms.cloudConfigCreateForm.reportValidity()&&(this.$emit("sendCommand",{command:"initCloud",data:this.newCloudData}),this.enableNewCloudButton=!1)},connectCloud:function(){document.forms.cloudConfigConnectForm.reportValidity()&&(this.$emit("sendCommand",{command:"connectCloud",data:this.connectCloudData}),this.enableCloudConnectButton=!1)},removeCloudModal:function(e){e.stopPropagation(),this.showCloudRemoveModal=!0},removeCloud:function(e){this.showCloudRemoveModal=!1,"confirm"==e&&(console.info("request removal of cloud"),this.$emit("sendCommand",{command:"removeMqttBridge",data:{bridge:this.getMqttBridgeIndex(this.cloudBridgeKey)}}))}}},j=t(8118);const R=(0,j.Z)(x,[["render",N]]);var K=R}}]);
//# sourceMappingURL=CloudConfig-legacy.b91b82ea.js.map