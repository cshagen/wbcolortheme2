"use strict";(self["webpackChunkopenwb_ui_settings"]=self["webpackChunkopenwb_ui_settings"]||[]).push([[9237],{6806:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var o=n(6252),d=n(3577);const a=(0,o.Uk)(" Wollen Sie den vorhandenen Cloud Zugang wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! "),u={class:"support"},l=(0,o.Uk)(" Sie müssen der "),s=(0,o.Uk)(" Datenschutzerklärung "),r=(0,o.Uk)(" zustimmen, um die openWB Cloud nutzen zu können. "),i={key:1},m=(0,o.Uk)(" Sie haben der "),c=(0,o.Uk)(" Datenschutzerklärung "),g=(0,o.Uk)(" zugestimmt und können die openWB Cloud nutzen. "),p=(0,o.Uk)(" Der Zugang wurde entfernt. Bitte starten Sie die openWB neu, um die Änderungen anzuwenden! "),w={key:1,name:"cloudConfigCreateForm"},C={key:0},b=(0,o.Uk)(' Diese openWB befindet sich im Modus "Nur Ladepunkt". Bitte richten Sie die openWB Cloud auf der regelnden openWB ein. '),f={key:1},k={class:"row justify-content-center"},B=(0,o.Uk)(" Zugang erstellen "),h=(0,o.Uk)(" Der neue Zugang wird eingerichtet. Dieser Vorgang kann bis zu einer Minute dauern. Bitte warten. "),y={key:2,name:"cloudConfigConnectForm"},W={key:0},_=(0,o.Uk)(' Diese openWB befindet sich im Modus "Nur Ladepunkt". Bitte richten Sie die openWB Cloud auf der regelnden openWB ein. '),v={key:1},D={class:"row justify-content-center"},q=(0,o.Uk)(" Mit Cloud verbinden "),V={key:3,name:"cloudConfigured"},U=(0,o.Uk)(" Der Zugang wurde eingerichtet. Bitte starten Sie die openWB neu, um die Änderungen anzuwenden! "),M=(0,o._)("span",null,[(0,o.Uk)(" Mit diesen Zugangsdaten können Sie sich in der "),(0,o._)("a",{href:"https://web.openwb.de/"},"openWB Cloud "),(0,o.Uk)(" anmelden. ")],-1),z={class:"row justify-content-center"},Z=(0,o.Uk)(" Zugang löschen ");function N(e,t,n,N,S,$){const x=(0,o.up)("openwb-base-modal-dialog"),j=(0,o.up)("router-link"),R=(0,o.up)("openwb-base-alert"),K=(0,o.up)("openwb-base-text-input"),P=(0,o.up)("openwb-base-click-button"),F=(0,o.up)("openwb-base-card"),I=(0,o.up)("openwb-base-heading");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(x,{show:S.showCloudRemoveModal,title:"Cloud Zugang löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:t[0]||(t[0]=e=>$.removeCloud(e))},{default:(0,o.w5)((()=>[a])),_:1},8,["show"]),(0,o._)("div",u,[!0!==e.$store.state.mqtt["openWB/system/dataprotection_acknowledged"]?((0,o.wg)(),(0,o.j4)(R,{key:0,subtype:"danger"},{default:(0,o.w5)((()=>[l,(0,o.Wm)(j,{to:"/System/DataProtection"},{default:(0,o.w5)((()=>[s])),_:1}),r])),_:1})):((0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(R,{subtype:"success"},{default:(0,o.w5)((()=>[m,(0,o.Wm)(j,{to:"/System/DataProtection"},{default:(0,o.w5)((()=>[c])),_:1}),g])),_:1}),S.enableRemoveCloudButton?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(R,{key:0,subtype:"warning"},{default:(0,o.w5)((()=>[p])),_:1})),$.cloudBridgeKey?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("form",w,[(0,o.Wm)(F,{title:"Neuen Zugang erstellen"},(0,o.Nv)({default:(0,o.w5)((()=>[!0===e.$store.state.mqtt["openWB/general/extern"]?((0,o.wg)(),(0,o.iD)("div",C,[(0,o.Wm)(R,{subtype:"info"},{default:(0,o.w5)((()=>[b])),_:1})])):((0,o.wg)(),(0,o.iD)("div",f,[(0,o.Wm)(K,{title:"Benutzername",required:"",subtype:"user",pattern:"[a-zA-Z]+",modelValue:S.newCloudData.username,"onUpdate:modelValue":t[1]||(t[1]=e=>S.newCloudData.username=e)},null,8,["modelValue"]),(0,o.Wm)(K,{title:"E-Mail",required:"",subtype:"email",modelValue:S.newCloudData.email,"onUpdate:modelValue":t[2]||(t[2]=e=>S.newCloudData.email=e)},null,8,["modelValue"])]))])),_:2},[!1===e.$store.state.mqtt["openWB/general/extern"]&&!0===e.$store.state.mqtt["openWB/system/dataprotection_acknowledged"]?{name:"footer",fn:(0,o.w5)((()=>[(0,o._)("div",k,[(0,o.Wm)(P,{class:(0,d.C_)(["col-4",S.enableNewCloudButton?"btn-success":"btn-outline-success"]),disabled:!S.enableNewCloudButton,onClick:$.createCloud},{default:(0,o.w5)((()=>[B])),_:1},8,["class","disabled","onClick"])])]))}:void 0]),1024),S.enableNewCloudButton?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(R,{key:0,subtype:"info",class:"mb-2"},{default:(0,o.w5)((()=>[h])),_:1}))])),$.cloudBridgeKey?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("form",y,[(0,o.Wm)(F,{title:"Vorhandenen Zugang einrichten"},(0,o.Nv)({default:(0,o.w5)((()=>[!0===e.$store.state.mqtt["openWB/general/extern"]?((0,o.wg)(),(0,o.iD)("div",W,[(0,o.Wm)(R,{subtype:"info"},{default:(0,o.w5)((()=>[_])),_:1})])):((0,o.wg)(),(0,o.iD)("div",v,[(0,o.Wm)(K,{title:"Benutzername",required:"",subtype:"user",modelValue:S.connectCloudData.username,"onUpdate:modelValue":t[3]||(t[3]=e=>S.connectCloudData.username=e)},null,8,["modelValue"]),(0,o.Wm)(K,{title:"Passwort",required:"",subtype:"password",modelValue:S.connectCloudData.password,"onUpdate:modelValue":t[4]||(t[4]=e=>S.connectCloudData.password=e)},null,8,["modelValue"])]))])),_:2},[!1===e.$store.state.mqtt["openWB/general/extern"]&&!0===e.$store.state.mqtt["openWB/system/dataprotection_acknowledged"]?{name:"footer",fn:(0,o.w5)((()=>[(0,o._)("div",D,[(0,o.Wm)(P,{class:(0,d.C_)(["col-4",S.enableCloudConnectButton?"btn-success":"btn-outline-success"]),disabled:!S.enableCloudConnectButton,onClick:$.connectCloud},{default:(0,o.w5)((()=>[q])),_:1},8,["class","disabled","onClick"])])]))}:void 0]),1024)])),$.cloudBridgeKey?((0,o.wg)(),(0,o.iD)("form",V,[S.enableCloudConnectButton&&S.enableNewCloudButton?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(R,{key:0,subtype:"warning"},{default:(0,o.w5)((()=>[U])),_:1})),(0,o.Wm)(F,{title:"Vorhandener Cloud Zugang"},{footer:(0,o.w5)((()=>[(0,o._)("div",z,[(0,o.Wm)(P,{class:(0,d.C_)(["col-4",S.enableRemoveCloudButton?"btn-danger":"btn-outline-danger"]),disabled:!S.enableRemoveCloudButton,onClick:t[7]||(t[7]=e=>$.removeCloudModal(e))},{default:(0,o.w5)((()=>[Z])),_:1},8,["class","disabled"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(I,null,{default:(0,o.w5)((()=>[M])),_:1}),(0,o.Wm)(K,{title:"Benutzername",required:"",subtype:"user",modelValue:$.getCloudCredentials().username,"onUpdate:modelValue":t[5]||(t[5]=e=>$.getCloudCredentials().username=e),disabled:""},null,8,["modelValue"]),(0,o.Wm)(K,{title:"Passwort",required:"",subtype:"password",modelValue:$.getCloudCredentials().password,"onUpdate:modelValue":t[6]||(t[6]=e=>$.getCloudCredentials().password=e),disabled:""},null,8,["modelValue"])])),_:1})])):(0,o.kq)("",!0)]))])],64)}var S=n(6061),$={name:"OpenwbCloudConfig",mixins:[S.Z],emits:["sendCommand"],data(){return{mqttTopicsToSubscribe:["openWB/general/extern","openWB/system/dataprotection_acknowledged","openWB/system/mqtt/bridge/+"],enableNewCloudButton:!0,newCloudData:{email:"",username:""},enableCloudConnectButton:!0,connectCloudData:{username:"",password:""},enableRemoveCloudButton:!0,showCloudRemoveModal:!1}},computed:{cloudBridge:{get(){let e=this.getWildcardTopics("openWB/system/mqtt/bridge/+");for(const[t,n]of Object.entries(e))n.remote.is_openwb_cloud||delete e[t];return e}},cloudBridgeKey:{get(){for(const[e,t]of Object.entries(this.cloudBridge))if(t.remote.is_openwb_cloud)return e}}},methods:{getCloudCredentials(){return{username:this.cloudBridge[this.cloudBridgeKey].remote.username,password:this.cloudBridge[this.cloudBridgeKey].remote.password}},getMqttBridgeIndex(e){return parseInt(e.match(/(?:\/)(\d+)$/)[1])},createCloud(){document.forms.cloudConfigCreateForm.reportValidity()&&(this.$emit("sendCommand",{command:"initCloud",data:this.newCloudData}),this.enableNewCloudButton=!1)},connectCloud(){document.forms.cloudConfigConnectForm.reportValidity()&&(this.$emit("sendCommand",{command:"connectCloud",data:this.connectCloudData}),this.enableCloudConnectButton=!1)},removeCloudModal(e){e.stopPropagation(),this.showCloudRemoveModal=!0},removeCloud(e){this.showCloudRemoveModal=!1,"confirm"==e&&(console.info("request removal of cloud"),this.$emit("sendCommand",{command:"removeMqttBridge",data:{bridge:this.getMqttBridgeIndex(this.cloudBridgeKey)}}))}}},x=n(8118);const j=(0,x.Z)($,[["render",N]]);var R=j}}]);
//# sourceMappingURL=CloudConfig.ffb0ecfb.js.map